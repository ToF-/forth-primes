# Using prime divisors to find primes

When using trial division to find primes not all numbers have to be tried. The fundamental theorem of arithmetics says that every integer greater than 1 can be uniquely represented as a product of prime numbers. This means that any division by a composite number is redundant if the division by its prime factors have been already tried.

For instance 4807 is 11 x 13 x 23, so only 5 divisors should be tried, { 2, 3, 5, 7, 11 } instead of 67, from 2 to 68.

In order to use prime numbers as divisors, we need to have them in a table. If we want to find primes up to 1000000, we need a table of primes from 2 to 1000. 

In Forth, the memory space that is used to store word definitions, called the _dictionary_ can also serve for storing values.

| forth word | effect | behavior |
| ---------- | ------ | -------- |
| `CREATE` |  | followed by _\<name\>_, reserve a new space in the available in the dictionary. When _\<name\>_ is executed, it will leave the address of the memory zone |
| `CONSTANT` | n → _ | followed by _\<name\>_, create a constant with value n in the dictionary. When _\<name\>_ is executed, the value is pushed on the stack |
| `VARIABLE` | | followed by _\<name\>_, create a variable in the dictionary. When _\<name\>_ is executed, the address of the variable is pushed on the stack |
| `ALLOT` | n → _ | reserve n bytes in the available space in the dictionary |
| `,` | n → _ | compile the cell value in the available space in the dictionary |
| `@` | a → n | fetch the cell value stored at the given address |
| `!` | n,a → | store the cell value n at the given address |
| CELL | _ → n | a constant leaving the number of bytes in a cell value (8 in gforth) |
| CELLS | n → n | a helper word to multiply and index by `CELL` |

Here's a program that outputs the code for such a table initialization. It loops over number 2 to 1000, and uses a counter so that à `CR` is emitted every 14 numbers. Also the numbers are printed on 4 positions each, and followed by a `,` which is the word to compile a new value in the dictionay, thus creating a table of values.

<pre><span style="color:#669999; font-weight:bold;">\</span> <span style="color:#669999; font-weight:bold;">print-init-168-primes.fs output code for prime divisor table init
</span><span style="color:#3D3D5C; font-weight:bold;">REQUIRE</span> <span style="color:#800000; font-weight:bold;">trial.fs</span>

<span style="color:#F07F00; font-weight:bold;">:</span> <span style="color:#336699; font-weight:bold;">.PRIME-TABLE</span>
    <span style="color:#800000; font-weight:bold;">0</span> <span style="color:#800000; font-weight:bold;">1000</span> <span style="color:#800000; font-weight:bold;">2</span> <span style="color:#993300; font-weight:bold;">DO</span>
        <span style="color:#993300; font-weight:bold;">I</span> <span style="color:#800000; font-weight:bold;">IS-PRIME?</span> <span style="color:#993300; font-weight:bold;">IF</span>
            <span style="color:#993300; font-weight:bold;">I</span> <span style="color:#800000; font-weight:bold;">4</span> <span style="color:#CC6600; font-weight:bold;">.R</span> <span style="color:#008000; font-weight:bold;">."</span> <span style="color:#008000; font-weight:bold;"> ,"</span>
            <span style="color:#CC6600; font-weight:bold;">1+</span>
            <span style="color:#009999; font-weight:bold;">DUP</span> <span style="color:#800000; font-weight:bold;">14</span> <span style="color:#CC6600; font-weight:bold;">MOD</span> <span style="color:#CC6600; font-weight:bold;">0=</span> <span style="color:#993300; font-weight:bold;">IF</span>
                <span style="color:#3D3D5C; font-weight:bold;">CR</span>
            <span style="color:#993300; font-weight:bold;">THEN</span>
        <span style="color:#993300; font-weight:bold;">THEN</span>
    <span style="color:#993300; font-weight:bold;">LOOP</span> <span style="color:#3D3D5C; font-weight:bold;">CR</span> <span style="color:#CC6600; font-weight:bold;">.</span> <span style="color:#993300; font-weight:bold;">;</span>

<span style="color:#008000; font-weight:bold;">."</span> <span style="color:#008000; font-weight:bold;">\ small-primes.fs"</span> <span style="color:#3D3D5C; font-weight:bold;">CR</span> <span style="color:#3D3D5C; font-weight:bold;">CR</span> 
<span style="color:#008000; font-weight:bold;">."</span> <span style="color:#008000; font-weight:bold;">CREATE SMALL-PRIMES"</span> <span style="color:#3D3D5C; font-weight:bold;">CR</span> <span style="color:#3D3D5C; font-weight:bold;">CR</span>
<span style="color:#336699; font-weight:bold;">.PRIME-TABLE</span>
<span style="color:#008000; font-weight:bold;">."</span> <span style="color:#008000; font-weight:bold;">CONSTANT SMALL-PRIMES-MAX"</span> <span style="color:#3D3D5C; font-weight:bold;">CR</span> <span style="color:#3D3D5C; font-weight:bold;">CR</span>
<span style="color:#008000; font-weight:bold;">."</span> <span style="color:#008000; font-weight:bold;">: NTH-PRIME ( n -- p )"</span> <span style="color:#3D3D5C; font-weight:bold;">CR</span>
<span style="color:#008000; font-weight:bold;">."</span> <span style="color:#008000; font-weight:bold;">    CELLS SMALL-PRIMES + @ ;"</span> <span style="color:#3D3D5C; font-weight:bold;">CR</span>
<span style="color:#3D3D5C; font-weight:bold;">BYE</span>
</pre>
Lauching this program and capturing its output
```
> gforth print-init-168-primes >small-primes.fs
```
Will give us exactly what we need to improve our trial program.

<pre><span style="color:#669999; font-weight:bold;">\</span> <span style="color:#669999; font-weight:bold;">small-primes.fs
</span>
<span style="color:#F07F00; font-weight:bold;">CREATE</span> <span style="color:#336699; font-weight:bold;">SMALL-PRIMES</span>

   <span style="color:#800000; font-weight:bold;">2</span> <span style="color:#CC3300; font-weight:bold;">,</span>   <span style="color:#800000; font-weight:bold;">3</span> <span style="color:#CC3300; font-weight:bold;">,</span>   <span style="color:#800000; font-weight:bold;">5</span> <span style="color:#CC3300; font-weight:bold;">,</span>   <span style="color:#800000; font-weight:bold;">7</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">11</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">13</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">17</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">19</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">23</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">29</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">31</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">37</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">41</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">43</span> <span style="color:#CC3300; font-weight:bold;">,</span>
  <span style="color:#800000; font-weight:bold;">47</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">53</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">59</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">61</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">67</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">71</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">73</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">79</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">83</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">89</span> <span style="color:#CC3300; font-weight:bold;">,</span>  <span style="color:#800000; font-weight:bold;">97</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">101</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">103</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">107</span> <span style="color:#CC3300; font-weight:bold;">,</span>
 <span style="color:#800000; font-weight:bold;">109</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">113</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">127</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">131</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">137</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">139</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">149</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">151</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">157</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">163</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">167</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">173</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">179</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">181</span> <span style="color:#CC3300; font-weight:bold;">,</span>
 <span style="color:#800000; font-weight:bold;">191</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">193</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">197</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">199</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">211</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">223</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">227</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">229</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">233</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">239</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">241</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">251</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">257</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">263</span> <span style="color:#CC3300; font-weight:bold;">,</span>
 <span style="color:#800000; font-weight:bold;">269</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">271</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">277</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">281</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">283</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">293</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">307</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">311</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">313</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">317</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">331</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">337</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">347</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">349</span> <span style="color:#CC3300; font-weight:bold;">,</span>
 <span style="color:#800000; font-weight:bold;">353</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">359</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">367</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">373</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">379</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">383</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">389</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">397</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">401</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">409</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">419</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">421</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">431</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">433</span> <span style="color:#CC3300; font-weight:bold;">,</span>
 <span style="color:#800000; font-weight:bold;">439</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">443</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">449</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">457</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">461</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">463</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">467</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">479</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">487</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">491</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">499</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">503</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">509</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">521</span> <span style="color:#CC3300; font-weight:bold;">,</span>
 <span style="color:#800000; font-weight:bold;">523</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">541</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">547</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">557</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">563</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">569</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">571</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">577</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">587</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">593</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">599</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">601</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">607</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">613</span> <span style="color:#CC3300; font-weight:bold;">,</span>
 <span style="color:#800000; font-weight:bold;">617</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">619</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">631</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">641</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">643</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">647</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">653</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">659</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">661</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">673</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">677</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">683</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">691</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">701</span> <span style="color:#CC3300; font-weight:bold;">,</span>
 <span style="color:#800000; font-weight:bold;">709</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">719</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">727</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">733</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">739</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">743</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">751</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">757</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">761</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">769</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">773</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">787</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">797</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">809</span> <span style="color:#CC3300; font-weight:bold;">,</span>
 <span style="color:#800000; font-weight:bold;">811</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">821</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">823</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">827</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">829</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">839</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">853</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">857</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">859</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">863</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">877</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">881</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">883</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">887</span> <span style="color:#CC3300; font-weight:bold;">,</span>
 <span style="color:#800000; font-weight:bold;">907</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">911</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">919</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">929</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">937</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">941</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">947</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">953</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">967</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">971</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">977</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">983</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">991</span> <span style="color:#CC3300; font-weight:bold;">,</span> <span style="color:#800000; font-weight:bold;">997</span> <span style="color:#CC3300; font-weight:bold;">,</span>

<span style="color:#800000; font-weight:bold;">168</span> <span style="color:#F07F00; font-weight:bold;">CONSTANT</span> <span style="color:#336699; font-weight:bold;">SMALL-PRIMES-MAX</span>

<span style="color:#F07F00; font-weight:bold;">:</span> <span style="color:#336699; font-weight:bold;">NTH-PRIME</span> <span style="color:#669999; font-weight:bold;">(</span> <span style="color:#669999; font-weight:bold;">n -- p )</span>
    <span style="color:#CC3300; font-weight:bold;">CELLS</span> <span style="color:#336699; font-weight:bold;">SMALL-PRIMES</span> <span style="color:#CC6600; font-weight:bold;">+</span> <span style="color:#CC3300; font-weight:bold;">@</span> <span style="color:#993300; font-weight:bold;">;</span>
</pre>

Let's try our code:
```
> gforth small-primes.fs
Gforth 0.7.3, Copyright (C) 1995-2008 Free Software Foundation, Inc.
Gforth comes with ABSOLUTELY NO WARRANTY; for details type `license'
Type `bye' to exit
42 NTH-PRIME . ⏎ 191  ok
0 NTH-PRIME . ⏎ 2  ok
167 NTH-PRIME . ⏎ 997  ok
```
